var A=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)};var s=(e,t,i)=>(A(e,t,"read from private field"),i?i.call(e):t.get(e)),a=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},f=(e,t,i,o)=>(A(e,t,"write to private field"),o?o.call(e,i):t.set(e,i),i);var u=(e,t,i)=>(A(e,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();var c,v,d,I,R,T;class M{constructor(t={}){a(this,I);a(this,c,null);a(this,v,null);a(this,d,{className:"custom-input",debounceTime:300,placeholder:"",type:"text"});a(this,T,t=>{clearTimeout(s(this,v)),t.key!=="Enter"&&(t.stopPropagation(),f(this,v,setTimeout(()=>{const i=new CustomEvent("customkeyup",{detail:{value:s(this,c).value}});s(this,c).dispatchEvent(i)},s(this,d).debounceTime)))});Object.assign(s(this,d),t),f(this,c,document.createElement("input")),u(this,I,R).call(this)}get element(){return s(this,c)}}c=new WeakMap,v=new WeakMap,d=new WeakMap,I=new WeakSet,R=function(){s(this,c).setAttribute("type",s(this,d).type),s(this,c).setAttribute("placeholder",s(this,d).placeholder),s(this,c).setAttribute("class",s(this,d).className),s(this,c).addEventListener("keyup",s(this,T))},T=new WeakMap;var m,b,p,g,y,w,U,E,D,L,C,N,S,j,$;class _{constructor(t,i,o={}){a(this,w);a(this,E);a(this,L);a(this,N);a(this,j);a(this,m,document.createElement("table"));a(this,b,void 0);a(this,p,void 0);a(this,g,void 0);a(this,y,{sortColumn:"id",filterDebounce:300});Object.assign(s(this,y),o),f(this,b,t),f(this,p,t),f(this,g,i),u(this,w,U).call(this)}sort(t){s(this,y).sortColumn=t,u(this,L,C).call(this),u(this,E,D).call(this)}filters(t){f(this,p,t?u(this,j,$).call(this,t):[...s(this,b)]),u(this,E,D).call(this)}get element(){return s(this,m)}}m=new WeakMap,b=new WeakMap,p=new WeakMap,g=new WeakMap,y=new WeakMap,w=new WeakSet,U=function(){u(this,N,S).call(this),u(this,L,C).call(this),u(this,E,D).call(this)},E=new WeakSet,D=function(){s(this,m).innerHTML=`<thead><tr>${s(this,g).map(i=>`<th>${i}</th>`).join("")}</tr></thead>`;const t=s(this,p).map(i=>`<tr>${s(this,g).map(o=>`<td>${i[o]}</td>`).join("")}</tr>`).join("");s(this,m).innerHTML+=`<tbody>${t}</tbody>`},L=new WeakSet,C=function(){s(this,p).sort((t,i)=>String(t[s(this,y).sortColumn]).localeCompare(String(i[s(this,y).sortColumn])))},N=new WeakSet,S=function(){s(this,m).addEventListener("click",t=>{t.target.tagName==="TD"&&t.target.parentNode.classList.toggle("highlight")})},j=new WeakSet,$=function(t){const i=t.toLowerCase().trim(),o=i.startsWith("^"),r=o?i.slice(1):i;return s(this,b).filter(n=>s(this,g).some(l=>{var O;const h=(O=n[l])==null?void 0:O.toLowerCase();return h?o?h.startsWith(r):h.includes(r):!1}))};async function P(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}catch(t){throw console.error("Error fetching data:",t),t}}function z(e,t,i,o,r={}){return e.map(n=>{const l=t.find(h=>h[o]===n[i]);return l?(r&&Object.keys(r).forEach(h=>{l[r[h]]&&(n[h]=l[r[h]])}),{...n,...l}):n})}const H="./data/cars.json",V="./data/devices.json",F=["RegNumber","Device","VIN","Model","InventoryNumber","ReleaseDate"];function W(e,t){return new _(e,t,{defaultSortColumn:"RegNumber",filterDebounce:300})}function B(){const e=new M("filter-input",{placeholder:"Фильтр"});return document.body.insertBefore(e.element,document.body.firstChild),e}async function K(){try{const[e,t]=await Promise.all([P(H),P(V)]),i=z(e,t,"DeviceId","Id",{Device:"Esn"}),o=W(i,F);B().element.addEventListener("customkeyup",n=>o.filters(n.detail.value)),document.body.appendChild(o.element)}catch(e){console.error("Error initializing UI:",e)}}K().then(e=>console.log("UI initialized"));
